<!DOCTYPE html>

<html lang="en" style="height: 100%">
<head>
<!-- Required meta tags -->
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Bootstrap CSS -->
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"/>
<script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" type="application/javascript"></script>
<style>
        a:hover {
            color: inherit;
        }

        h5.card-title {
            margin-top: 1em;
        }

        ul.statistics-list {
            margin-left: 0;
            padding-left: 0;
            list-style-position: outside;
            list-style-type: none;
        }

        ul.statistics-list li {
            margin-left: 1em;
            padding-left: 0;
        }

        .popuptext {
            visibility: hidden;
        }

        .show {
            visibility: visible;
        }
    </style>
<title>Prospector Report</title>
</head>
<body style="height: 100%">
<div class="container-fluid h-100">
<div class="row h-100">
<div class="col-3 h-100 overflow-scroll bg-light bg-gradient border border-secondary">
<div class="advisory-record" style="margin-top: 3ex">
<h3>Advisory Record</h3>
<a href="https://nvd.nist.gov/vuln/detail/CVE-2017-7481" target="_blank"><b id="cve_id">CVE-2017-7481</b></a><br/>
<p class="text-justify">Ansible before versions 2.3.1.0 and 2.4.0.0 fails to properly mark
                        lookup-plugin results as unsafe. If an attacker could control the results of lookup() calls,
                        they could inject Unicode strings to be parsed by the jinja2 templating system, resulting in
                        code execution. By default, the jinja2 templating language is now marked as 'unsafe' and
                        is not evaluated.</p>
<h5>Possible relevant files/methods</h5>
<p style="margin: 10pt">
<ul class="list-group">
<li class="list-group-item">lookup-plugin</li>
</ul>
</p>
<h5>Other relevant keywords</h5>
<p style="margin: 10pt">
<li class="list-group-item">attacker</li>
<li class="list-group-item">call</li>
<li class="list-group-item">code</li>
<li class="list-group-item">control</li>
<li class="list-group-item">default</li>
<li class="list-group-item">evaluate</li>
<li class="list-group-item">execution</li>
<li class="list-group-item">fail</li>
<li class="list-group-item">inject</li>
<li class="list-group-item">jinja2</li>
<li class="list-group-item">language</li>
<li class="list-group-item">lookup</li>
<li class="list-group-item">mark</li>
<li class="list-group-item">parse</li>
<li class="list-group-item">plugin</li>
<li class="list-group-item">result</li>
<li class="list-group-item">string</li>
<li class="list-group-item">system</li>
<li class="list-group-item">template</li>
<li class="list-group-item">templating</li>
<li class="list-group-item">unicode</li>
<li class="list-group-item">version</li>
</p>
</div>
<button aria-controls="offcanvasExample" class="btn btn-primary" data-bs-target="#offcanvasExample" data-bs-toggle="offcanvas" type="button">
                    Show exec. stats
                </button>
<div aria-labelledby="offcanvasExampleLabel" class="offcanvas offcanvas-start" id="offcanvasExample" tabindex="-1">
<div class="offcanvas-header">
<h5 class="offcanvas-title" id="offcanvasExampleLabel">Execution Statistics</h5>
<button aria-label="Close" class="btn-close text-reset" data-bs-dismiss="offcanvas" type="button"></button>
</div>
<div class="offcanvas-body">
<ul class="statistics-list">
<li><i class="fas fa-sitemap"></i> <strong>core</strong>
<ul class="statistics-list">
<li><i class="fas fa-sitemap"></i> <strong>git</strong>
<ul class="statistics-list">
<li><i class="fas fa-sitemap"></i> <strong>git</strong>
<ul class="statistics-list">
<li><i class="fas fa-sitemap"></i> <strong>Git</strong>
<ul class="statistics-list">
<li><i class="fas fa-sitemap"></i>
<strong>create_commits</strong>
<ul class="statistics-list">
<li><i class="fas fa-hourglass-half"></i>
<strong>execution time</strong> = 0.3923 seconds
                                                                    </li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><i class="fas fa-sitemap"></i> <strong>commit preprocessing</strong>
<ul class="statistics-list">
<li><i class="fas fa-hourglass-half"></i> <strong>execution time</strong> =
                                                0.8209 seconds</li>
</ul>
</li>
<li><i class="fas fa-sitemap"></i> <strong>candidates analysis</strong>
<ul class="statistics-list">
<li><i class="fas fa-hourglass-half"></i> <strong>execution time</strong> =
                                                0.2027 seconds</li>
</ul>
</li>
<li><i class="fas fa-hourglass-half"></i> <strong>execution time</strong> = 82.16
                                        seconds</li>
</ul>
</li>
<li><i class="fas fa-sitemap"></i> <strong>rules</strong>
<ul class="statistics-list">
<li><i class="fas fa-info-circle"></i> <strong>active</strong> = 16 rules</li>
<li><i class="fas fa-info-circle"></i> <strong>matches</strong> = 525 matches</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="col h-100 overflow-scroll">
<div class="container">
<div class="row">
<div class="col">
<h1>Prospector Report</h1>
</div>
<div class="col col-auto align-self-end mb-2">
<span class="popuptext" id="copy-popup">Copied!</span>
<a class="btn btn-primary btn-sm" id="clipboardCopyButton" target="_blank">Copy
                                to clipboard</a>
<a class="btn btn-primary btn-sm" id="downloadYamlButton" target="_blank">Download
                                as YAML statement</a>
</div>
</div>
<div id="col accordion">
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: fail", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: plugin", "relevance": 4}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 1568", "relevance": 2}]' data-relevances="10">
<div class="card-header" id="candidateheader1">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Fix for ansible/ansible-modules-core#1568 When checksums of local...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-1" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">




</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-1" class="collapse hide" data-parent="#accordion" id="candidatebody-1">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> c5067cff6b2bff42e0d34408ab339c79939be545
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/c5067cff6b2bff42e0d34408ab339c79939be545" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: fail</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue: 1568
                                            </div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Fix for ansible/ansible-modules-core#1568 When
                                                checksums of local and remote files match, and when follow = True,
                                                determine if remote destination is a symlink. If so, de-reference it and
                                                pass the link target to the file module as 'dest'. This change
                                                fixes an edge case in file copy behavior when: - 'dest' is a
                                                symlink to some other file ('realdest') - follow = True - the
                                                checksums of the source file, 'src', and the symlink target,
                                                'realdest', match. Because the checksums match, the copy module
                                                is skipped and the file module is invoked directly with 'dest' =
                                                the symlink, and 'src' = the source of the copy module, whether
                                                that source is present on the target machine or not. When 'src'
                                                doesn't exist on the target machine, this leads to an error that
                                                looks like this because it can't change the target of the symlink:
                                                TASK [copy]
                                                ********************************************************************
                                                fatal: [192.168.56.101]: FAILED! =&gt; {"changed": false,
                                                "checksum": "f572d396fae9206628714fb2ce00f72e94f2258f",
                                                "failed": true, "gid": 1000, "group":
                                                "ajdecon", "mode": "0777", "msg":
                                                "src file does not exist, use \"force=yes\" if you really
                                                want to create the link: /tmp/issue1568/dest_dir/source",
                                                "owner": "ajdecon", "path":
                                                "/tmp/issue1568/dest_dir/dest", "size": 8,
                                                "src": "source", "state": "link",
                                                "uid": 1000} When the path 'src' *does* exist on the
                                                target machine, the file module makes this the symlink "dest -&gt;
                                                src" instead of "dest -&gt; realdest"... even if the
                                                checksum of 'src' on the target machine is different from the
                                                checksum of 'src' on the machine where Ansible is running.
                                                (cherry picked from commit 2f74f6738d2e147fa1642924220d749de7ebedad)
                                            </div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: code", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: plugin", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 24172, 24259", "relevance": 2}]' data-relevances="12">
<div class="card-header" id="candidateheader2">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                include_vars to delegated only if delegate_facts (#24259) *...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-2" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">





</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-2" class="collapse hide" data-parent="#accordion" id="candidatebody-2">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> 77fa3f1598d42e6689659cc53f6e65be18a2a7ba
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/77fa3f1598d42e6689659cc53f6e65be18a2a7ba" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: code</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                24172, 24259</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">include_vars to delegated only if delegate_facts
                                                (#24259) * include_vars to delegated only if delegate_facts fixes #24172
                                                * since code is now same, simplified (cherry picked from commit
                                                b731c2d8092934e48053ae9f90a35d998e89cf5d)</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/b731c2d8092934e48053ae9f90a35d998e89cf5d" id="twinCommitId">
                                                b731c2d8092934e48053ae9f90a35d998e89cf5d</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: fail, version", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: control, version", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 23285, 24291", "relevance": 2}]' data-relevances="12">
<div class="card-header" id="candidateheader3">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Fixes #23285 (#24291) Makes subversion module --check fail when...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-3" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">





</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-3" class="collapse hide" data-parent="#accordion" id="candidatebody-3">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> f57d7bb01687e66c05a9cd0ce40685443a7e0749
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/f57d7bb01687e66c05a9cd0ce40685443a7e0749" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: fail, version</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: control, version</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                23285, 24291</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Fixes #23285 (#24291) Makes subversion module --check
                                                fail when modified files are in repository. (cherry picked from commit
                                                4bd04c299b644cd13d4af05eb61e1c814fd8120f)</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/4bd04c299b644cd13d4af05eb61e1c814fd8120f" id="twinCommitId">
                                                4bd04c299b644cd13d4af05eb61e1c814fd8120f</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "COMMIT_IN_REFERENCE", "message": "This commit is mentioned 6 times in the references.", "relevance": 64}, {"id": "VULN_ID_IN_MESSAGE", "message": "The commit message mentions the vulnerability ID", "relevance": 64}, {"id": "SEC_KEYWORDS_IN_MESSAGE", "message": "The commit message contains some security-related keywords: unsafe, security", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: unicode, template, jinja2, lookup, mark, string, result, code", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: template", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}]' data-relevances="142">
<div class="card-header" id="candidateheader4">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Fixing security issue with lookup returns not tainting the jinja2...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-4" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">







</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-4" class="collapse hide" data-parent="#accordion" id="candidatebody-4">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> ed56f51f185a1ffd7ea57130d260098686fcc7c2
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/ed56f51f185a1ffd7ea57130d260098686fcc7c2" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">This commit is mentioned 6 times in the references.
                                            </div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message mentions the vulnerability ID
                                            </div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message contains some security-related
                                                keywords: unsafe, security</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: unicode, template, jinja2, lookup, mark,
                                                string, result, code</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: template</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Fixing security issue with lookup returns not
                                                tainting the jinja2 environment CVE-2017-7481 Lookup returns wrap the
                                                result in unsafe, however when used through the standard templar engine,
                                                this does not result in the jinja2 environment being marked as unsafe as
                                                a whole. This means the lookup result looses the unsafe protection and
                                                may become simple unicode strings, which can result in bad things being
                                                re-templated. This also adds a global lookup param and cfg options for
                                                lookups to allow unsafe returns, so users can force the previous
                                                (insecure) behavior.</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">



</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/fd30f5328986f9e1da434474481f32bf918a600c" id="twinCommitId">
                                                fd30f5328986f9e1da434474481f32bf918a600c</a>
</li>
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/f0e348f5eeb70c1fb3127d90891da43b5c0a9d29" id="twinCommitId">
                                                f0e348f5eeb70c1fb3127d90891da43b5c0a9d29</a>
</li>
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/a1886911fcf4b691130cfc70dfc5daa5e07c46a3" id="twinCommitId">
                                                a1886911fcf4b691130cfc70dfc5daa5e07c46a3</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: template", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: template, plugin", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 24413", "relevance": 2}]' data-relevances="12">
<div class="card-header" id="candidateheader5">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Fix template not showing a diff with a directory Template can take a...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-5" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">





</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-5" class="collapse hide" data-parent="#accordion" id="candidatebody-5">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> cdd6ab000b2c85d5dd0dc86c2ae8580e6978b819
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/cdd6ab000b2c85d5dd0dc86c2ae8580e6978b819" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: template</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: template, plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                24413</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Fix template not showing a diff with a directory
                                                Template can take a directory as the destination. When that's the
                                                case, we need to diff between the source and the file inside of the
                                                directory. That happened when the directory was specified with a
                                                trailing slash but not when it was specified on its own. This change
                                                fixes that. Fixes #24413 (cherry picked from commit
                                                548cacdf6a28a708142c4a2e4ed1ecba8102b60a)</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/548cacdf6a28a708142c4a2e4ed1ecba8102b60a" id="twinCommitId">
                                                548cacdf6a28a708142c4a2e4ed1ecba8102b60a</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: control, default", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: plugin", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 23579", "relevance": 2}]' data-relevances="12">
<div class="card-header" id="candidateheader6">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Avoid default serialization of classes in dump_attrs For playbook...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-6" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">





</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-6" class="collapse hide" data-parent="#accordion" id="candidatebody-6">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> 180ce9ffe679a565fbfc69b1cfddcb5d97141b87
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/180ce9ffe679a565fbfc69b1cfddcb5d97141b87" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: control, default</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                23579</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Avoid default serialization of classes in dump_attrs
                                                For playbook base objects, when dumping attributes via dump_attrs() an
                                                attribute like loop_control is a class. Using the default serialization
                                                for these is slow and consumes a lot of memory. Since LoopControl is
                                                also based on the Base class, we can use serialize() instead and save a
                                                lot of resources. This also adds a from_attrs() complimentary method to
                                                nicely turn the dumped attrs back into proper field attributes. Fixes
                                                #23579 (cherry picked from commit
                                                78478e80ea01c2d752af5abdfbf3f744bfd188ac)</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">


</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/78478e80ea01c2d752af5abdfbf3f744bfd188ac" id="twinCommitId">
                                                78478e80ea01c2d752af5abdfbf3f744bfd188ac</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: result, template", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: plugin", "relevance": 4}, {"id": "COMMIT_HAS_TWINS", "message": "This commit has one or more twins.", "relevance": 2}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 20508, 23599", "relevance": 2}]' data-relevances="12">
<div class="card-header" id="candidateheader7">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Use delegated vars for the delegated host name In...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-7" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">





</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-7" class="collapse hide" data-parent="#accordion" id="candidatebody-7">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> 7e605f4e84d5280cb0987fe5c1ea7da0a12b127c
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/7e605f4e84d5280cb0987fe5c1ea7da0a12b127c" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: result, template</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">This commit has one or more twins.</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                20508, 23599</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Use delegated vars for the delegated host name In
                                                _process_pending_results (strategy/__init__.py), we were using the
                                                delegate_to field directly from the original task, which was not being
                                                templated correctly. As an alternate to #23599, this patch instead pulls
                                                the host name out of the delegated vars passed back in the task result
                                                dictionary to avoid having to re-template things. Fixes #23599 Fixes
                                                #20508 (cherry picked from commit
                                                e5cd675b38d49b22f1ecc929943d016fb7159856)</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<h5 class="card-title"><i class="fas fa-shield-alt"></i> Commit twins</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item" id="commitTwinsList">
<a id="twinCommitTag">no-tag: </a>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/e5cd675b38d49b22f1ecc929943d016fb7159856" id="twinCommitId">
                                                e5cd675b38d49b22f1ecc929943d016fb7159856</a>
</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: result, fail", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: plugin", "relevance": 4}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 24301", "relevance": 2}]' data-relevances="10">
<div class="card-header" id="candidateheader8">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Also check the iterator for failed host status in linear strategy...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-8" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">




</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-8" class="collapse hide" data-parent="#accordion" id="candidatebody-8">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> f217dae938dd451d32c54643ae98020cc592e63d
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/f217dae938dd451d32c54643ae98020cc592e63d" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: result, fail</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: plugin</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                24301</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Also check the iterator for failed host status in
                                                linear strategy When only looking at the failed state of the TaskResult,
                                                certain failures cause the linear strategy to fail out sooner than it
                                                should and not execute the always portion of blocks. Fixes #24301</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">

</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: default", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: default", "relevance": 4}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 24564", "relevance": 2}]' data-relevances="10">
<div class="card-header" id="candidateheader9">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                [GCP] Healthcheck module (#24564) * [GCP] Healthcheck module * fix...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-9" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">




</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-9" class="collapse hide" data-parent="#accordion" id="candidatebody-9">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> c99c3b2b5d396b2cc1d25ad9aa6816aa922ffbc7
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/c99c3b2b5d396b2cc1d25ad9aa6816aa922ffbc7" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: default</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: default</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                24564</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">[GCP] Healthcheck module (#24564) * [GCP] Healthcheck
                                                module * fix return YAML block * removed update_ return value; removed
                                                python26 check; typos and docs updates * doc fix * Updated int test for
                                                no-update conditions * added filter_gcp_fields test * fixed bug in
                                                update where dictionary wasn't built correctly and port was not
                                                being set. * added default values to documentation block</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">





</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
<div class="card commit d-flex" data-annotations='[{"id": "ADV_KEYWORDS_IN_MSG", "message": "The commit message and the advisory description contain the following keywords: fail, version", "relevance": 4}, {"id": "ADV_KEYWORDS_IN_FILES", "message": "An advisory keyword is contained in the changed files: template", "relevance": 4}, {"id": "GITHUB_ISSUE_IN_MESSAGE", "message": "The commit message references some github issue: 24762", "relevance": 2}]' data-relevances="10">
<div class="card-header" id="candidateheader10">
<div class="container d-flex flex-column">
<div class="row flex-grow-1">
<div class="col-10">
<h5>
                                                Increase python version coverage for tests. (#24762) * Improve...

                                            </h5>
</div>
<div class="col-1 form-check d-flex align-items-center">
<input class="form-check-input" id="flexCheckDefault" onchange="selectCard()" type="checkbox" value=""/>
</div>
<div class="col-1 d-flex align-items-center">
<button aria-controls="collapseExample" aria-expanded="false" class="btn btn-primary btn-sm px-1 py-1" data-bs-target="#candidatebody-10" data-bs-toggle="collapse" type="button"><i class="bi bi-arrows-expand"></i>
</button>
</div>
</div>
<div class="row flex-grow-1">
<div class="col-2">
</div>
<div class="col-9">
</div>
</div>
<div class="row flex-grow-1">
<div class="col-10">




</div>
</div>
</div>
</div>
<div aria-labelledby="candidateheader-10" class="collapse hide" data-parent="#accordion" id="candidatebody-10">
<div class="card-body">
<h5 class="card-title" id="commit_id">
<i class="fas fa-code-branch"></i> 5babe2daeac9cc1374cb6246aea60d641cc5d49d
                                    </h5>
<h6 class="card-subtitle mb-2 text-muted">
<i class="fab fa-git-alt"></i>
<a class="link-dark" href="https://github.com/ansible/ansible/commit/5babe2daeac9cc1374cb6246aea60d641cc5d49d" id="repository_url" target="_blank">
                                            Open commit</a>
</h6>
<h5 class="card-title"> Matched rules</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">The commit message and the advisory description
                                                contain the following keywords: fail, version</div>
</li>
<li class="list-group-item">
<div class="card-text">An advisory keyword is contained in the changed
                                                files: template</div>
</li>
<li class="list-group-item">
<div class="card-text">The commit message references some github issue:
                                                24762</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-quote-left"></i> Commit message</h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">
<div class="card-text">Increase python version coverage for tests. (#24762)
                                                * Improve ansible-test inventory handling. * Fix python 3 re-raise of
                                                exception from thread. * Fix python 3 encoding for windows-integration.
                                                * Run network tests on multiple python versions. * Run windows tests on
                                                multiple python versions. * Support Shippable delegation using --tox. *
                                                Skip vyos_command on python 3 tests until fixed. * Add python 3
                                                filtering to local and tox. * Fix tests to support back to back runs. *
                                                Temporarily test networking with python 2.7 only. Running the tests back
                                                to back causes intermittent test failures which need to be addressed
                                                before we can test multiple versions in a single test run.</div>
</li>
</ul>
<h5 class="card-title"><i class="fas fa-file-signature"></i> Changed files in commit
                                    </h5>
<ul class="list-group list-group-flush mx-3">
<li class="list-group-item">













</li>
</ul>
<!-- <h5 class="card-title"><i class="fas fa-link"></i> Referred by pages linked from advisories</h5>

<p>
    
</p>
 -->
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">
        buttons = document.getElementsByClassName("selector");

        function toggle(selector) {
            if (selector.classList.contains("btn-primary")) {
                selector.classList.replace("btn-primary", "btn-outline-primary");
            } else {
                selector.classList.replace("btn-outline-primary", "btn-primary");
            }
        }


        function showFromRelevance(relevance) {
            let commit_cards = document.getElementsByClassName('commit');
            relevanceRangeOutput = document.getElementById("relevanceRangeOutput");
            relevanceRangeOutput.innerHTML = relevance;
            for (let card of commit_cards) {
                if (parseInt(card.dataset.relevances) >= parseInt(relevance)) {
                    card.classList.replace('d-none', 'd-flex')
                } else {
                    card.classList.replace('d-flex', 'd-none')
                }
            }
        }
        relevanceRange = document.getElementById("relevanceRange");
        relevanceRange.oninput = function () {
            showFromRelevance(this.value);

        }
        max = parseInt(document.getElementsByClassName('commit')[0].dataset.relevances);
        relevanceRange.max = max;
        relevanceRange.value = max;
        showFromRelevance(max);

        function selectCard() {
            let hdr = event.target.closest("div.card-header")
            if (hdr.classList.contains('bg-success')) {
                hdr.classList.remove('bg-success')
            } else {
                hdr.classList.add('bg-success')
            }
        }

        function exportToYaml() {
            let list = document.querySelectorAll(".card-header.bg-success")
            if (list.length == 0) {
                return ""
            }

            let cve_id = document.getElementById("cve_id").textContent
            let out = `vulnerability_id: ${cve_id}\nfixes:\n`

            for (let i = 0; i < list.length; i++) {
                let [repo_url, commit_id] = list[i].closest('.card').querySelector('#repository_url').href.split('/commit/')
                let main_tag = list[i].closest('.card').querySelector('#mainCommitTag').textContent.split(":")[1].trim()
                out += `- id: ${main_tag}\n  commits:\n  - id: ${commit_id}\n    repository: ${repo_url}\n`
                let twins = list[i].closest('.card').querySelectorAll('#commitTwinsList')
                for (let twin of twins) {
                    let twin_tag = twin.querySelector('#twinCommitTag').textContent.split(":")[0].trim()
                    let [twin_url, twin_id] = twin.querySelector('#twinCommitId').href.split("/commit/")
                    out += `- id: ${twin_tag}\n  commits:\n  - id: ${twin_id}\n    repository: ${twin_url}\n`
                }
            }

            return out
        }

        function copyToClipboard() {
            let text = exportToYaml()
            try {
                navigator.clipboard.writeText(text)
                document.getElementById("copy-popup").classList.toggle("show")
                setTimeout(() => {
                    document.getElementById("copy-popup").classList.toggle("show")
                }, 1000)
            } catch (err) {
                console.log('Something went wrong', err);
            }
        }

        function downloadAsFile() {
            let text = exportToYaml()
            if (text == "") {
                return
            }
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', "statement.yaml");

            element.style.display = 'none';
            document.body.appendChild(element);

            element.click();

            document.body.removeChild(element);
        }

        let copyButton = document.getElementById("clipboardCopyButton")
        copyButton.addEventListener("click", copyToClipboard)

        let downloadButton = document.getElementById("downloadYamlButton")
        downloadButton.addEventListener("click", downloadAsFile)


    </script>
<script type="application/javascript">
        function toggle_collapse_all(selector) {

            if (selector.classList.contains("btn-primary")) {
                selector.classList.replace("btn-primary", "btn-outline-primary");
                selector.innerHTML = 'Collapse all';
                collapseAll(true)

            } else {
                selector.classList.replace("btn-outline-primary", "btn-primary");
                selector.innerHTML = 'Expand all';
                collapseAll(false)
            }

            // for (let card of commit_cards) {
            //     let card_body = card.getElementsByClassName('collapse').item(0);
            //     if (selector.innerHTML == 'Expand All') {
            //         card_body.classList.replace('hide', 'show');
            //     } else {
            //         card_body.classList.replace('show', 'hide');
            //     }
            // }
            // console.log("toggle collapse all")
        }

        function collapseAll(show) {
            let commit_cards = document.getElementsByClassName('commit');
            for (let card of commit_cards) {
                let card_body = card.getElementsByClassName('collapse').item(0);
                if (show) {
                    card_body.classList.replace('hide', 'show');
                } else {
                    card_body.classList.replace('show', 'hide');
                }
            }
        }

        collapse_all_button = document.getElementById('collapse_all_toggle');
        collapse_all_button.addEventListener('click', function () { toggle_collapse_all(collapse_all_button); })

    </script>
<!-- Bootstrap Bundle with Popper -->
<script crossorigin="anonymous" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>